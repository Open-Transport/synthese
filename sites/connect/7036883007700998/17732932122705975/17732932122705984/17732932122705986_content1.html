<?vdv_servers_list&
  roid=<@roid@>&
  template=<{server&template=

	<@tabs["properties"]=Propriétés@>
	<@tabs["subscriptions"]=Abonnements@>
	<@tab=<@tab?tab:"properties"@>@>

	<ul class="breadcrumb">
	<li><?link&target=/&text=Connect?> <span class="divider">/</span></li>
	<li><?link&target=/client?> <span class="divider">/</span></li>
	<h1>Serveur VDV <@name@> (<@address@>:<@port@>)</h1>
	</ul>
	

	<ul class="nav nav-tabs"><{tabs&template=
	 <li <@(tab==id)?" class=\"active\"":""@>><a href="#<@id@>" data-toggle="tab"><@value@></a></li>
	}></ul>

	<div class="tab-content">

	<div class="tab-pane <@(tab=="properties")?"active":""@>" id="properties">

	<?form&
	  target=<@p@>&
	  name=props&
	  a=ObjectUpdate&
	  actionParam_object_id=<@roid@>&
	  roid=<@roid@>&
	  tab=properties&
	?>
	<table class="table table-striped table-condensed">
	 <tr>
	  <td>Nom</td>
	  <td><input type="text" value="<@name@>" name="actionParam_field_name" /></td>
	 </tr><tr>
	  <td>Adresse</td>
	  <td><input type="text" value="<@address@>" name="actionParam_field_address" /></td>
	 </tr><tr>
	  <td>Port</td>
	  <td><input type="text" value="<@port@>" name="actionParam_field_port" /></td>
	 </tr><tr>
	  <td>Code du serveur</td>
	  <td><input type="text" value="<@server_control_centre_code@>" name="actionParam_field_server_control_centre_code" /></td>
	 </tr><tr>
	  <td>Code du client</td>
	  <td><input type="text" value="<@client_control_centre_code@>" name="actionParam_field_client_control_centre_code" /></td>
	 </tr><tr>
	  <td>Code du service</td>
	  <td><input type="text" value="<@sevice_code@>" name="actionParam_field_service_code" /></td>
	 </tr><tr>
	  <td>Source de données</td>
	  <td>
	   <select name="actionParam_field_data_source_id">
	    <option<@(0==data_source_id)?" selected=\"true\"":""@>>(aucune)</option>
	    <?data_sources&template=<{data_source&template=
	    	<option<@(id==data_source_id)?" selected=\"true\"":""@>><@name@></option>
	    }>?>
	   </select>
	  </td>
	 </tr><tr>
	  <td>Répertoire de log (trace)</td>
	  <td><input type="text" value="<@trace_path@>" name="actionParam_field_trace_path" /></td>
	 </tr><tr>
	  <td></td>
	  <td><button type="submit" class="btn btn-warning">Enregistrer</button></td>
	 </tr>	 
	</table>
	</form>

	</div>
	<div class="tab-pane <@(tab=="subscriptions")?"active":""@>" id="subscriptions">
	
	<?form&
	  target=/client/vdv/subscription&
	  name=add_subscription&
	  a=ObjectCreate&
	  actionParam_table_id=98&
	  actionParam_field_vdv_server_id=<@roid@>&
	  co=1&
	?>
	<table class="table table-striped table-condensed"><thead>
	 <tr><th></th><th>nom</th><th>arrêt</th><th>statut</th><th></th></tr>
	</thead><tbody>
	 <tr class="warning">
	  <td></td>
	  <td><input type="text" name="actionParam_field_name" /></td>
	  <td>
	   <select name="actionParam_field_stop_area_id">
	    <?StopAreasListFunction&
	      template=<{stopArea&template=
	  	<option<@(stop_id==stop_area_id)?" selected=\"true\"":""@> value="<@stop_id@>"><@stop_name@></option>
	    }>?>
	   </select>
	  </td>
	  <td></td>
	  <td>
	   <button type="submit" class="btn btn-warning">Ajouter</button>
	  </td>
	 </tr>
	 <{subscription&template=
	 	<tr>
	 	 <td>
	 	  <?link&
	 	    target=/client/vdv/subscription&
	 	    roid=<@id@>&
	 	    text=Ouvrir&
	 	    class=btn btn-mini btn-primary&
	 	  ?>
	 	 </td>
	 	 <td><@name@></td>
	 	 <td>
		  <?StopAreasListFunction&
		    template=<{stopArea&template=<?if&cond=<@stop_id==stop_area_id@>&then=
		    	<@stop_name@>
		    ?>}>
		  ?>
	 	 </td><td>
	 	  <span class="label label-<@online?"success":"important"@>"><@online?"Actif":"Inactif"@></span>
	 	 </td><td>
	 	  <?link&
	 	    target=<@p@>&
	 	    a=RemoveObjectAction&
	 	    actionParamoi=<@id@>&
	 	    roid=<@roid@>&
	 	    tab=subscriptions&
	 	    text=Supprimer&
	 	    confirm=Etes-vous sûr de vouloir supprimer l'abonnement ?&
	 	    class=btn btn-mini btn-danger&
	 	  ?>
	 	 </td>
	 	</tr>
	 }>
	</tbody></table>

	
	</div>
	</div>

}>?>